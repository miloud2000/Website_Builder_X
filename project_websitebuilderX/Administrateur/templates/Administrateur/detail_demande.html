{% extends "Administrateur/dashbordAdministrateur.html" %}
{% load static %}

{% block content %}
<div class="dashboard-content">
  <div class="main-card">
    <br>
    <h2>
      <i class="fas fa-info-circle text-primary me-2"></i>
      Détail de la demande {{ demande.code }}
    </h2>

    <div class="row mb-4">
      <!-- Colonne de gauche : infos textuelles -->
      <div class="col-md-6">
        <ul class="list-group">
          <li class="list-group-item">
            <strong>Client :</strong> {{ demande.client }}
          </li>
          <li class="list-group-item">
            <strong>Montant :</strong> {{ demande.montant }}
          </li>
          <li class="list-group-item">
            <strong>Statut :</strong> {{ demande.statut }}
          </li>
          <li class="list-group-item">
            <strong>Date de création :</strong> {{ demande.date }}
          </li>
          <li class="list-group-item">
            <strong>Gestionnaire :</strong> {{ demande.gestionnaire }}
          </li>
          {% if demande.motif %}
            <li class="list-group-item">
              <strong>Motif de non-acceptation :</strong> {{ demande.motif }}
            </li>
          {% endif %}
        </ul>
      </div>

      <!-- Colonne de droite : image si présente -->
      <div class="col-md-6">
        {% if demande.image_url %}
          <img src="{{ demande.image_url }}"
               alt="Image de la demande {{ demande.code }}"
               class="img-fluid rounded" />
        {% endif %}
      </div>
    </div>

    <!-- Tableau des traces -->
    {% if traces %}
      <h4>Historique des mises à jour</h4>
      <table class="table table-sm">
        <thead>
          <tr>
            <th>Date</th>
            <th>Gestionnaire</th>
            <th>Solde</th>
          </tr>
        </thead>
        <tbody>
          {% for trace in traces %}
            <tr>
              <td>{{ trace.date }}</td>
              <td>{{ trace.gestionnaire}}</td>
              <td>{{ trace.solde }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}

    <a href="{% url 'liste_demandes_recharge' %}" class="btn btn-secondary mt-3">
      <i class="fas fa-arrow-left me-1"></i> Retour à la liste
    </a>
  </div>
</div>
{% endblock %}
